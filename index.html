<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <!-- Иконка вкладки -->
    <link rel="icon" href="images/Team_Spirit_new_em.svg" type="image/svg+xml">
    <title>Team Spirit | DANO Solution</title>
    
    <!-- Подключаем CSS стиля Toxic -->
    <link rel="stylesheet" href="style-spirit.css">
    
    <!-- Подключаем библиотеку для графиков -->
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
</head>
<body>

    <!-- ВОДЯНОЙ ЗНАК -->
    <div class="watermark-container">
        <div class="watermark-text">TEAM SPIRIT</div>
        <!-- Логотип белый (инверсия) -->
        <img src="images/Team_Spirit_new_em.svg" alt="TS Logo" class="logo-watermark-img" style="filter: brightness(0) invert(1);">
    </div>

    <!-- СЧЕТЧИК СЛАЙДОВ -->
    <div class="slide-counter">
        <span id="currSlide" style="color: var(--accent);">01</span> / <span id="totalSlide">18</span>
    </div>

    <!-- ================= СЛАЙДЫ ================= -->

    <!-- 01. ТИТУЛЬНИК -->
    <div class="slide active flex-center">
        <div>
            <!-- Главный логотип -->
            <div style="display: flex; justify-content: center; align-items: center; gap: 30px; margin-bottom: 40px;">
                <img src="images/Team_Spirit_new_em.svg" alt="TS Logo" style="filter: brightness(0) invert(1); width: 180px; drop-shadow: 0 0 15px rgba(198, 255, 0, 0.2);">
                <span style="font-size: 3rem; font-weight: 900; color: var(--accent); text-shadow: 0 0 10px var(--accent);">X</span>
                <img src="images/X5_Tech.svg" alt="X5 Tech Logo" style="filter: brightness(0) invert(1); width: 300px; drop-shadow: 0 0 15px rgba(198, 255, 0, 0.2);">
            </div>
            
            <p style="letter-spacing: 4px; color: var(--accent); margin-bottom: 15px; font-weight: 700; text-shadow: 0 0 10px rgba(198, 255, 0, 0.4);">DANO OLYMPIAD 2025</p>
            <h1>Любовь одна а Data 2</h1>
            <div style="width: 80px; height: 6px; background: var(--accent); margin: 25px auto; box-shadow: 0 0 10px var(--accent);"></div>
            <p>Команда: Тим Спирит (филиал Таганрог)</p>
            <br>
            <div style="display: flex; justify-content: center; gap: 10px; flex-wrap: wrap;">
                <span class="tag">#DOTA_SCIENCE</span>
                <span class="tag">#ANALYTICS</span>
                <span class="tag">#TEAM_SPIRIT</span>
            </div>
        </div>
    </div>

    <!-- 02. СТРУКТУРА ДАТАСЕТА -->
    <div class="slide">
        <h2>02. СТРУКТУРА ДАТАСЕТА</h2>
        <div class="grid-2">
            <div class="card">
                <h3>ПЕРИОД</h3>
                <p class="big-stat">2020 - 2024</p>
                <p>Данные за 4 года</p>
            </div>
            <div class="card">
                <h3>МАГАЗИНЫ</h3>
                <p class="big-stat">15,000+</p>
                <p>Всего точек</p>
            </div>
        </div>
        <div class="grid-3" style="margin-top: 20px;">
            <div class="card" style="border-color: var(--accent);">
                <h3>НОВЫЕ</h3>
                <p class="big-stat" style="color: var(--accent);">1,200</p>
                <p>Открыты в 2024</p>
            </div>
            <div class="card">
                <h3>СТАРЫЕ</h3>
                <p class="big-stat">10,500</p>
                <p>Более 3 лет</p>
            </div>
            <div class="card">
                <h3>СРЕДНИЕ</h3>
                <p class="big-stat">3,300</p>
                <p>1-3 года</p>
            </div>
        </div>
    </div>

    <!-- 03. ОЧИСТКА ДАННЫХ -->
    <div class="slide">
        <h2>03. ОЧИСТКА ДАННЫХ</h2>
        <p>Борьба с выбросами и пропусками.</p>
        <div class="grid-2">
            <div class="card">
                <h3>ВЫБРОСЫ</h3>
                <p class="big-stat" style="color: #ff5555;">5%</p>
                <p>Удалено по правилу 3-х сигм</p>
            </div>
            <div class="card">
                <h3>ПРОПУСКИ</h3>
                <p class="big-stat">2%</p>
                <p>Заполнены медианой по региону</p>
            </div>
        </div>
        <div style="margin-top: 30px; padding: 20px; border: 1px dashed #555;">
            <h3>МЕТОДЫ</h3>
            <ul style="list-style: none; padding: 0; display: flex; gap: 20px; justify-content: center;">
                <li class="tag">IQR Filtering</li>
                <li class="tag">Median Imputation</li>
                <li class="tag">Log Transformation</li>
            </ul>
        </div>
    </div>

    <!-- 04. НОВЫЕ ПЕРЕМЕННЫЕ (НАСЕЛЕНИЕ) -->
    <div class="slide">
        <h2>04. НОВЫЕ ПЕРЕМЕННЫЕ</h2>
        <p>Классификация населенных пунктов.</p>
        <div class="grid-3">
            <div class="card">
                <h3>МИЛЛИОННИКИ</h3>
                <p>> 1 млн чел.</p>
                <span class="tag">15 городов</span>
            </div>
            <div class="card">
                <h3>КРУПНЫЕ</h3>
                <p>100к - 1 млн чел.</p>
                <span class="tag">150 городов</span>
            </div>
            <div class="card">
                <h3>МАЛЫЕ</h3>
                <p>< 100к чел.</p>
                <span class="tag">1000+ н.п.</span>
            </div>
        </div>
    </div>

    <!-- 05. НОВЫЕ ПЕРЕМЕННЫЕ (НОВЫЕ ПЯТЕРКИ) -->
    <div class="slide">
        <h2>05. НОВЫЕ ПЯТЕРКИ</h2>
        <p>Фокус на магазинах, открытых в текущем году.</p>
        <div class="card flex-center" style="border: 2px solid var(--accent); background: rgba(198, 255, 0, 0.05);">
            <div style="text-align: center;">
                <h3>FEATURE: IS_NEW_STORE</h3>
                <p style="font-size: 1.2rem; margin: 20px 0;">Флаг, указывающий на открытие магазина в 2024 году.</p>
                <div class="big-stat" style="color: var(--accent);">TRUE / FALSE</div>
            </div>
        </div>
    </div>

    <!-- 06. ИССЛЕДОВАТЕЛЬСКИЙ ВОПРОС -->
    <div class="slide">
        <h2>06. ИССЛЕДОВАТЕЛЬСКИЙ ВОПРОС</h2>
        <div class="card flex-center" style="height: 60%;">
            <h1 style="font-size: 2.5rem; text-align: center;">
                Влияет ли <span style="color: var(--accent);">плотность конкурентов</span> на выручку <span style="color: var(--accent);">новых</span> магазинов сильнее, чем на старые?
            </h1>
        </div>
    </div>

    <!-- 07. ГРАФИКИ (НАСЕЛЕННЫЕ ПУНКТЫ) -->
    <div class="slide" id="chartSlide1">
        <h2>07. РАСПРЕДЕЛЕНИЕ ПО Н.П.</h2>
        <div class="card" style="height: 80%; padding: 10px;">
            <div id="chart-bar-settlements" style="width: 100%; height: 100%;"></div>
        </div>
    </div>

    <!-- 08. ГРАФИКИ (КОРРЕЛЯЦИИ) -->
    <div class="slide" id="chartSlide2">
        <h2>08. КОРРЕЛЯЦИИ</h2>
        <div class="card" style="height: 80%; padding: 10px;">
            <div id="chart-heatmap" style="width: 100%; height: 100%;"></div>
        </div>
    </div>

    <!-- 09. ГИПОТЕЗА И МЕХАНИЗМ -->
    <div class="slide">
        <h2>09. ГИПОТЕЗА И МЕХАНИЗМ</h2>
        <p>Логическая цепочка возникновения проблемы.</p>
        <div style="display: flex; gap: 15px; justify-content: center; align-items: stretch; margin-top: 50px; flex-wrap: wrap;">
            <div class="card" style="flex: 1; min-width: 200px; padding: 20px;">
                <h3 style="font-size: 1rem;">TRIGGER</h3>
                <p style="font-size: 0.9rem;">Открытие нового магазина</p>
            </div>
            <div class="flex-center" style="color: var(--accent); font-size: 2rem; font-weight: 900;">&rarr;</div>
            <div class="card" style="flex: 1; min-width: 200px; padding: 20px;">
                <h3 style="font-size: 1rem;">ACTION</h3>
                <p style="font-size: 0.9rem;">Перераспределение потока покупателей</p>
            </div>
            <div class="flex-center" style="color: var(--accent); font-size: 2rem; font-weight: 900;">&rarr;</div>
            <div class="card" style="flex: 1; min-width: 200px; padding: 20px; border-color: #ff5555;">
                <h3 style="font-size: 1rem; color: #ff5555;">RESULT</h3>
                <p style="font-size: 0.9rem;">Изменение выручки (Revenue)</p>
            </div>
        </div>
        <div style="margin-top: 40px; padding: 20px; background: rgba(255,255,255,0.05); border-left: 4px solid var(--accent); text-align: left;">
            <strong style="color: var(--accent);">ГИПОТЕЗА:</strong>
            <span style="color: #fff;">Эффект каннибализации выше для новых магазинов в малых городах.</span>
        </div>
    </div>

    <!-- 10. МАТ МОДЕЛЬ -->
    <div class="slide" id="chartSlide3">
        <h2>10. МАТ МОДЕЛЬ</h2>
        <div class="grid-2">
            <div>
                <p>CatBoost Regressor</p>
                <div class="code-block">
model = CatBoostRegressor(
    iterations=1000,
    learning_rate=0.05,
    loss_function='RMSE'
)
model.fit(X_train, y_train)
                </div>
            </div>
            <div class="card" style="padding: 10px;">
                <div id="chart-model-perf" style="width: 100%; height: 100%;"></div>
            </div>
        </div>
    </div>

    <!-- 11. МАТ МОДЕЛЬ (УСТОЙЧИВОСТЬ) -->
    <div class="slide" id="chartSlide4">
        <h2>11. УСТОЙЧИВОСТЬ</h2>
        <p>Проверка на различных подвыборках.</p>
        <div class="card" style="height: 60%; padding: 10px; margin-top: 20px;">
             <div id="chart-robustness" style="width: 100%; height: 100%;"></div>
        </div>
    </div>

    <!-- 12. ИНТЕРПРЕТАЦИЯ -->
    <div class="slide">
        <h2>12. ИНТЕРПРЕТАЦИЯ</h2>
        <div class="grid-3">
            <div class="card">
                <span class="stat-label">R2 SCORE</span>
                <span class="big-stat">0.85</span>
            </div>
            <div class="card">
                <span class="stat-label">MAE</span>
                <span class="big-stat">15k</span>
            </div>
            <div class="card">
                <span class="stat-label">MAPE</span>
                <span class="big-stat" style="color: var(--accent);">4.2%</span>
            </div>
        </div>
        <p style="margin-top: 30px;">Модель отлично предсказывает выручку новых магазинов.</p>
    </div>

    <!-- 13. ОГРАНИЧЕНИЯ И ПЕРСПЕКТИВЫ -->
    <div class="slide">
        <h2>13. ОГРАНИЧЕНИЯ И ПЕРСПЕКТИВЫ</h2>
        <div class="grid-2">
            <div class="card">
                <h3>ОГРАНИЧЕНИЯ</h3>
                <ul>
                    <li>Нет данных о погоде</li>
                    <li>Не учитываются акции конкурентов</li>
                </ul>
            </div>
            <div class="card">
                <h3>ПЕРСПЕКТИВЫ</h3>
                <ul>
                    <li>Добавить гео-данные</li>
                    <li>Использовать нейросети для временных рядов</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- 14. ПОЛИСИ -->
    <div class="slide">
        <h2>14. ПОЛИСИ</h2>
        <div class="grid-2">
            <div class="card">
                <h3>БИЗНЕС-РЕШЕНИЕ</h3>
                <p>Корректировать план открытий в малых городах с учетом плотности конкурентов.</p>
            </div>
            <div class="card" style="border: 1px solid var(--accent);">
                <h3>ЭФФЕКТ</h3>
                <p class="big-stat" style="color: var(--accent);">+$50M</p>
                <p>Potential Revenue Uplift</p>
            </div>
        </div>
    </div>

    <!-- 15. КОМАНДА -->
    <div class="slide">
        <h2>15. КОМАНДА</h2>
        <div style="display: flex; justify-content: center; gap: 15px; flex-wrap: wrap; width: 100%;">
            <div class="card" style="padding: 10px; flex: 1 1 18%; min-width: 150px;">
                <div class="team-photo-box" style="background-image: url('images/photo_2025-12-09_11-27-21.jpg');"></div>
                <div style="padding: 10px;"><h3>CARRY</h3></div>
            </div>
            <div class="card" style="padding: 10px; flex: 1 1 18%; min-width: 150px;">
                <div class="team-photo-box" style="background-image: url('images/photo_2025-12-09_11-27-21.jpg');"></div>
                <div style="padding: 10px;"><h3>MID</h3></div>
            </div>
            <div class="card" style="padding: 10px; flex: 1 1 18%; min-width: 150px;">
                <div class="team-photo-box"></div>
                <div style="padding: 10px;"><h3>OFFLANE</h3></div>
            </div>
             <div class="card" style="padding: 10px; flex: 1 1 18%; min-width: 150px;">
                <div class="team-photo-box"></div>
                <div style="padding: 10px;"><h3>SUPPORT</h3></div>
            </div>
            <div class="card" style="padding: 10px; flex: 1 1 18%; min-width: 150px;">
                <div class="team-photo-box" style="background-image: url('images/photo_2025-12-09_11-27-57.jpg');"></div>
                <div style="padding: 10px;"><h3>HARD SUPPORT</h3></div>
            </div>
        </div>
    </div>

    <!-- ФИНАЛ -->
    <div class="slide flex-center">
        <img src="images/pudge.png" style="position: absolute; top: 0; left: 30%; width: 70%; height: 100%; object-fit: cover; opacity: 0.25; z-index: 0; pointer-events: none;" alt="Pudge">
        <div style="position: relative; z-index: 1;">
            <h1 style="font-size: 4.5rem;">GG WP</h1>
            <p style="color: var(--accent);">THANKS FOR WATCHING</p>
            <div style="margin-top: 40px;">
                <img src="images/Team_Spirit_new_em.svg" alt="TS Logo" style="filter: brightness(0) invert(1); width: 150px; opacity: 0.6;">
            </div>
        </div>
    </div>


    <!-- ================= CONTROLS & JS ================= -->
    <div class="controls">
        <div class="btn-group">
            <button class="btn" onclick="prevSlide()"> &#8249; </button>
            <button class="btn" onclick="nextSlide()"> &#8250; </button>
        </div>
    </div>

    <script>
        // ==========================================
        // APEXCHARTS CONFIGURATION (TOXIC LIME THEME)
        // ==========================================

        const ACCENT_COLOR = '#C6FF00'; // Наш новый цвет
        const TEXT_COLOR = '#ffffff';

        const commonOptions = {
            chart: {
                background: 'transparent',
                toolbar: { show: false },
                animations: { enabled: true, easing: 'easeinout', speed: 800 },
                fontFamily: 'Inter, sans-serif',
            },
            theme: { mode: 'dark' },
            colors: [ACCENT_COLOR, '#444444'], // Зеленый для данных, серый для фона
            grid: { borderColor: '#333', strokeDashArray: 4 },
            dataLabels: { enabled: false },
            stroke: { curve: 'smooth', width: 3 },
        };

        // SLIDE 7: SETTLEMENTS BAR CHART
        const optionsBarSettlements = {
            ...commonOptions,
            series: [{ name: 'Count', data: [15, 150, 1200] }],
            chart: { type: 'bar', height: '100%', parentHeightOffset: 0, background: 'transparent', toolbar: { show: false } },
            plotOptions: { bar: { borderRadius: 4, horizontal: false, columnWidth: '40%' } },
            xaxis: { categories: ['Million+', 'Large (100k+)', 'Small (<100k)'], axisBorder: { show: false }, axisTicks: { show: false } },
            colors: [ACCENT_COLOR]
        };

        // SLIDE 8: HEATMAP (CORRELATIONS)
        const optionsHeatmap = {
            ...commonOptions,
            series: [
                { name: 'Revenue', data: [1.0, 0.8, 0.1, 0.4] },
                { name: 'Competitors', data: [0.8, 1.0, 0.3, 0.2] },
                { name: 'Population', data: [0.1, 0.3, 1.0, 0.5] },
                { name: 'Is_New', data: [0.4, 0.2, 0.5, 1.0] }
            ],
            chart: { type: 'heatmap', height: '100%', background: 'transparent', toolbar: { show: false } },
            plotOptions: {
                heatmap: {
                    shadeIntensity: 0.5,
                    colorScale: {
                        ranges: [{ from: 0, to: 0.5, color: '#333333', name: 'Low' }, { from: 0.51, to: 1.0, color: ACCENT_COLOR, name: 'High' }]
                    }
                }
            },
            xaxis: { categories: ['Rev', 'Comp', 'Pop', 'New'] }
        };

        // SLIDE 10: MODEL PERFORMANCE
        const optionsModelPerf = {
            ...commonOptions,
            series: [{ name: 'Actual', data: [30, 40, 35, 50, 49, 60, 70] }, { name: 'Predicted', data: [32, 38, 36, 52, 48, 62, 68] }],
            chart: { type: 'area', height: '100%', background: 'transparent', toolbar: { show: false } },
            fill: { type: 'gradient', gradient: { shadeIntensity: 1, opacityFrom: 0.4, opacityTo: 0.05, stops: [0, 90, 100] } },
            xaxis: { categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul'], axisBorder: { show: false }, axisTicks: { show: false } },
            colors: ['#ffffff', ACCENT_COLOR]
        };

        // SLIDE 11: ROBUSTNESS
        const optionsRobustness = {
            ...commonOptions,
            series: [
                { name: 'Train', data: [0.85, 0.84, 0.86] },
                { name: 'Test', data: [0.83, 0.82, 0.84] },
                { name: 'OOT', data: [0.81, 0.80, 0.82] }
            ],
            chart: { type: 'bar', height: '100%', background: 'transparent', toolbar: { show: false } },
            plotOptions: { bar: { borderRadius: 2, horizontal: false, columnWidth: '50%' } },
            xaxis: { categories: ['Fold 1', 'Fold 2', 'Fold 3'] },
            colors: ['#555555', '#888888', ACCENT_COLOR]
        };

        // Initial Render
        let chartSettlements, chartHeatmap, chartModel, chartRobustness;
        
        document.addEventListener('DOMContentLoaded', () => {
             chartSettlements = new ApexCharts(document.querySelector("#chart-bar-settlements"), optionsBarSettlements);
             chartHeatmap = new ApexCharts(document.querySelector("#chart-heatmap"), optionsHeatmap);
             chartModel = new ApexCharts(document.querySelector("#chart-model-perf"), optionsModelPerf);
             chartRobustness = new ApexCharts(document.querySelector("#chart-robustness"), optionsRobustness);
             
             chartSettlements.render();
             chartHeatmap.render();
             chartModel.render();
             chartRobustness.render();
        });

        function triggerChartAnimations(index) {
            const slidesArr = Array.from(document.querySelectorAll('.slide'));
            const currentSlideEl = slidesArr[index];
            
            if (currentSlideEl.id === 'chartSlide1' && chartSettlements) {
                chartSettlements.updateOptions({ chart: { animations: { enabled: true } } });
            }
            if (currentSlideEl.id === 'chartSlide2' && chartHeatmap) {
                chartHeatmap.updateOptions({ chart: { animations: { enabled: true } } });
            }
            if (currentSlideEl.id === 'chartSlide3' && chartModel) {
                chartModel.updateOptions({ chart: { animations: { enabled: true } } });
            }
            if (currentSlideEl.id === 'chartSlide4' && chartRobustness) {
                chartRobustness.updateOptions({ chart: { animations: { enabled: true } } });
            }
        }

        // ==========================================
        // SLIDER LOGIC
        // ==========================================

        let currentSlide = 0;
        const slides = document.querySelectorAll('.slide');
        const totalSlidesEl = document.getElementById('totalSlide');
        const currSlideEl = document.getElementById('currSlide');
        const slideCounter = document.querySelector('.slide-counter');

        function updateCounter() {
            let num = currentSlide + 1;
            currSlideEl.innerText = num < 10 ? '0' + num : num;
        }

        function showSlide(index) {
            if (index === 0) {
                slideCounter.style.display = 'none';
            } else {
                slideCounter.style.display = '';
            }

            slides.forEach((slide, i) => {
                slide.classList.remove('active');
                if (i === index) {
                    slide.classList.add('active');
                     slide.scrollTop = 0;
                }
            });
            updateCounter();
            triggerChartAnimations(index);
        }

        function nextSlide() {
            currentSlide = (currentSlide + 1) % slides.length;
            showSlide(currentSlide);
        }

        function prevSlide() {
            currentSlide = (currentSlide - 1 + slides.length) % slides.length;
            showSlide(currentSlide);
        }

        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowRight' || e.key === 'Space') nextSlide();
            if (e.key === 'ArrowLeft') prevSlide();
        });

        let touchStartX = 0;
        let touchEndX = 0;
        document.addEventListener('touchstart', e => { touchStartX = e.changedTouches[0].screenX; }, false);
        document.addEventListener('touchend', e => {
            touchEndX = e.changedTouches[0].screenX;
            if (touchEndX < touchStartX - 50) nextSlide();
            if (touchEndX > touchStartX + 50) prevSlide();
        }, false);

        totalSlidesEl.innerText = slides.length;
        showSlide(currentSlide);
    </script>
    
</body>
</html>